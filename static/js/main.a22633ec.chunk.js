(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(7),s=n(1),c=n.n(s),i=n(4),l=n.n(i),d=n(5),u=n(6),h=n(13),p=n(12),f=n(14),g=n(10),m=n(8),v=n(20),y=n(21),w=n.n(y),E=n(22),b=n.n(E),k=n(23),j=n.n(k),O=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).key=EM.getQs("key"),n.dtdcId="9hsi23n792il4r2fpnk08kmnj8@group.calendar.google.com",n.dvdcId="88nt7fbcnbvdk7q5ojngskd2rc@group.calendar.google.com",n.state={currentEvent:null,maxWidth:window.innerWidth},n.electionDates=EM.electionDates.map(function(e,t){return Object.assign({},e,{color:"#d03b3b",id:"e"+t,className:"election"})}),n.holidays=EM.holidays.map(function(e,t){return Object.assign({},e,{color:"#ccc",id:"h"+t,className:"holiday"})}),n.onClose=n.onClose.bind(Object(g.a)(n)),n.calendarRef=c.a.createRef();var a=Object(g.a)(n);return window.parent&&(console.log("sending message",window.parent),window.addEventListener("message",function(e){console.log("message received from parent",e.data),e.data.width&&a.setState({maxWidth:e.data.width})},!1),window.parent.postMessage({message:"getWidth"},"*")),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"onClose",value:function(){this.setState({currentEvent:null})}},{key:"render",value:function(){var e=this;return console.log(this.state.maxWidth),c.a.createElement("div",{key:"contents",className:"page page-home container-fluid",style:{width:this.state.maxWidth-20}},c.a.createElement(v.a,{ref:this.calendarRef,defaultView:"listMonth",height:"parent",header:{left:this.state.maxWidth<960?"today":"prev,next today",center:"title",right:this.state.maxWidth<960?"prev,next":"listMonth,dayGridMonth,dayGridWeek"},buttonText:{today:"Today",month:"Month",week:"Week",day:"Day",list:"List"},plugins:[w.a,b.a,j.a],googleCalendarApiKey:this.key,eventSources:[this.electionDates,this.holidays,{googleCalendarId:this.dtdcId,className:"dtdc",id:"dtdc",color:"#f7c121"},{googleCalendarId:this.dvdcId,className:"dvdc",id:"dvdc",color:"#27aff3"}],eventClick:function(t){t.jsEvent.preventDefault(),t.event.extendedProps&&(t.event.extendedProps.description||t.event.extendedProps.location)&&e.setState({currentEvent:t.event})}}),this.state.currentEvent?c.a.createElement(m.b,{isOpen:!!this.state.currentEvent,toggle:this.onClose},c.a.createElement(m.e,{toggle:this.toggle},this.state.currentEvent.title),c.a.createElement(m.c,null,c.a.createElement("h5",null,"Description:"),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.currentEvent.extendedProps.description}}),c.a.createElement("hr",null),c.a.createElement("h5",null,"Location:"),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.currentEvent.extendedProps.location}})),c.a.createElement(m.d,null,c.a.createElement(m.a,{color:"secondary",onClick:this.onClose},"Close"))):null)}}]),t}(s.Component),x=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"page-container"},c.a.createElement(O,this.props))}}]),t}(s.Component),I=(n(25),n(15),function(e,t){t=t||",";for(var n=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),a=[[]],r=null;r=n.exec(e);){var o,s=r[1];s.length&&s!==t&&a.push([]),r[2]?"undefined"===(o=r[2].replace(new RegExp('""',"g"),'"'))&&(o=""):o=r[3],a[a.length-1].push(o?o.trim():o)}var c=[];return a.forEach(function(e){""!==e.join("")&&c.push(e)}),c}),S=n(37).DateTime,C=function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,[{key:"init",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.qs=this.getQsParams(),e.next=3,this.fetchStaticJson("data/election-dates.json");case 3:return this.electionDates=e.sent,e.next=6,this.fetchStaticJson("data/holidays.json");case 6:this.holidaysRaw=e.sent,this.holidays=[],Object.keys(this.holidaysRaw).forEach(function(e){Array.prototype.push.apply(t.holidays,t.getHolidaysFromTopKey(e))});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getHolidaysFromTopKey",value:function(e){var t=this,n=[];return Object.keys(this.holidaysRaw[e].static).forEach(function(a){try{var r=a.split("/"),o=S.local(2019,parseInt(r[0]),parseInt(r[1])),s=S.local(2020,parseInt(r[0]),parseInt(r[1])),c=t.holidaysRaw[e].static[a];n.push({start:o.toISODate(),end:o.toISODate(),title:c}),n.push({start:s.toISODate(),end:s.toISODate(),title:c})}catch(i){console.log(e,a)}}),Object.keys(this.holidaysRaw[e].dynamic).forEach(function(a){try{var r=a.split("/"),o=S.local(parseInt(r[2]),parseInt(r[0]),parseInt(r[1])),s=t.holidaysRaw[e].dynamic[a];n.push({start:o.toISODate(),end:o.toISODate(),title:s})}catch(c){console.log(e,a)}}),n}},{key:"fetchStaticJson",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n).then(function(e){return e.json()}).catch(function(e,t){throw console.log("Fetch Static Error:",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchStaticText",value:function(){var e=Object(o.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n).then(function(e){return e.text()}).then(function(e){return I(e)}).catch(function(e,t){throw console.log("Fetch Static Error:",e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getQsParams",value:function(){var e=window.location.search.substring(1),t={};if(e.length>0)for(var n=e.split("&"),a=0;a<n.length;a++){var r=n[a].split("="),o=r[1]?decodeURIComponent(r[1]):null;t[decodeURIComponent(r[0])]=o||!0}return t}},{key:"getQs",value:function(e){return!!this.qs[e]&&this.qs[e]}}]),e}();n(38),n(39),n(40);window.EM=new C,Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.EM.init();case 2:l.a.render(c.a.createElement(x,null),document.getElementById("root"));case 3:case"end":return e.stop()}},e)}))()}},[[26,1,2]]]);
//# sourceMappingURL=main.a22633ec.chunk.js.map